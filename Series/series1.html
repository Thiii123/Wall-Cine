// 1. Lista de Filmes (Certifique-se que o campo 'genre' está bem preenchido)
const allMovies = [
    {
        title: "O Poderoso Chefão",
        url: "filmes/poderoso_chefao.html",
        // Separamos as tags por vírgula e espaço para facilitar a visualização e pesquisa.
        genre: "Crime, Drama, Clássico",
        actors: "Marlon Brando, Al Pacino",
        image_path: "images/chefao.jpg"
    },
    {
        title: "A Origem",
        url: "filmes/a_origem.html",
        genre: "Ficção Científica, Açao , Thriller",
        display_genre: "Crime, Drama",
        actors: "Leonardo DiCaprio, Joseph Gordon-Levitt",
        image_path: "assets/caçadores(1).jpg"
    },
    {
        title: "Interestelar",
        url: "filmes/interestelar.html",
        genre: "Ficção Científica, Aventura, Espaço , filmes de acao ",
        actors: "Matthew McConaughey, Anne Hathaway",
        image_path: "images/interestelar.jpg"
    },
    {
        title: "Matrix",
        url: "filmes/matrix.html",
        genre: "Ficção Científica, Ação, Cyberpunk",
        actors: "Keanu Reeves, Laurence Fishburne",
        image_path: "images/matrix.jpg"
    },
    // Adicione mais filmes com tags de gênero detalhadas aqui...
];

const movieListElement = document.getElementById('movieList');

// Função de Pesquisa
function filterMovies() {
    const input = document.getElementById('searchInput');
    // Converte a busca para maiúsculas para uma comparação sem distinção de caixa
    const searchTerm = input.value.trim().toUpperCase();

    movieListElement.innerHTML = '';

    if (searchTerm === "") {
        return;
    }

    // Filtra os filmes: verifica se o termo de pesquisa está em qualquer tag
    const results = allMovies.filter(movie => {
        // Concatena Título, Gênero (Tags) e Atores
        const fullText = (movie.title + " " + movie.genre + " " + movie.actors).toUpperCase();

        // Retorna TRUE se a busca (searchTerm) estiver contida na string completa (fullText)
        return fullText.includes(searchTerm);
    });

    // Renderiza os Resultados Clicáveis
    if (results.length > 0) {
        results.forEach(movie => {
            const listItem = document.createElement('li');
            const link = document.createElement('a');
            link.href = movie.url;

            // Separa as tags (gêneros) do filme em um array
            const genresArray = movie.genre.split(', ');

            // Cria os elementos visuais das tags para exibição
            let tagsHtml = genresArray.map(tag =>
                // Cada tag recebe a classe 'genre-tag' para estilização no CSS
                `<span class="genre-tag">${tag}</span>`
            ).join(''); // Junta todos os <span>s criados

            // Adiciona a Imagem e os Detalhes do Filme
            link.innerHTML = `
                <img src="${movie.image_path}" alt="Pôster do filme ${movie.title}" class="movie-poster">
                <div class="movie-info">
                    <span class="movie-title">${movie.title}</span>
                    <div class="movie-tags">
                        ${tagsHtml} </div>
                    <span class="movie-details">
                        Atores: ${movie.actors.split(',')[0].trim()}...
                    </span>
                </div>
            `;

            listItem.appendChild(link);
            movieListElement.appendChild(listItem);
        });
    } else {
        const noResult = document.createElement('li');
        noResult.textContent = `Nenhum resultado encontrado para "${searchTerm}".`;
        noResult.className = 'no-results';
        movieListElement.appendChild(noResult);
    }
}